(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6999ab9c"],{"4cc3":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"navigation"},[n("el-menu",{attrs:{"background-color":"#24292e","text-color":"rgba(255, 255, 255, 0.75)","active-text-color":"#fff","default-active":t.activeIndex,router:"",mode:"horizontal"}},[n("el-menu-item",{attrs:{index:"",disabled:""}},[t._v("\n\t\t\t\tOpenStar\n            ")]),t._l(t.$router.options.routes[0].children,function(e,o){return[e.leaf?n("el-submenu",{key:o,attrs:{index:o+""}},[n("template",{slot:"title"},[t._v(t._s(e.meta.name))]),t._l(e.children,function(e,o){return["DomainRuleSet"!==e.name?n("div",{key:o},[e.leaf?n("el-submenu",{attrs:{index:"1"+o}},[n("template",{slot:"title"},[t._v(t._s(e.meta.name))]),t._l(e.children,function(e,o){return n("el-menu-item",{key:o,attrs:{index:e.path}},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e.meta.name)+"\n\t\t\t\t\t\t\t\t")])})],2):n("el-menu-item",{attrs:{index:e.path}},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(e.meta.name)+"\n\t\t\t\t\t\t\t")])],1):t._e()]})],2):n("el-menu-item",{key:o,attrs:{index:e.path}},[t._v("\n\t\t\t\t\t"+t._s(e.meta.name)+"\n\t\t\t\t")])]}),n("el-menu-item",{staticStyle:{float:"right"},attrs:{index:"",disabled:""}},[n("span",{staticStyle:{"margin-right":"10px",color:"lightgray"}},[t._v("\n\t\t\t\t\t欢迎,admin 集群状态: "+t._s(t.master)+"\n\t\t\t\t")]),n("el-button",{attrs:{size:"mini"},on:{click:t.reload}},[t._v("载入规则")]),n("el-button",{attrs:{size:"mini"},on:{click:t.saveAll}},[t._v("保存全部")]),n("el-dropdown",{attrs:{trigger:"hover"}},[n("span",{staticClass:"fa fa-desktop",staticStyle:{"margin-left":"20px","margin-right":"20px",color:"red"}}),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{nativeOn:{click:function(e){return t.restart(e)}}},[t._v("重启")]),n("el-dropdown-item",{nativeOn:{click:function(e){return t.cluster(e)}}},[t._v("集群重启")])],1)],1),n("el-button",{staticStyle:{color:"lightgray"},attrs:{type:"text"},on:{click:t.logout}},[n("span",{staticClass:"fa fa-sign-out"}),t._v(" 退出登录")])],1)],2)],1)},a=[],i=(n("7f7f"),{data:function(){return{master:window.localStorage.getItem("master")||""}},computed:{activeIndex:function(){return this.$route.name}},mounted:function(){this.initMaster()},methods:{cluster:function(){var t,e=this;this.$confirm("此操作将重启集群, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t=e.secReq(e.api.cluster,"post",{action:"reload"}),t.hasOwnProperty("code")&&"ok"===t.code?e.$notify({type:"success",title:"提示",message:"集群操作成功",duration:4e3}):e.$notify({type:"warning",title:"提示",message:t.msg,duration:4e3})}).catch(function(){e.$message({type:"info",message:"已取消"})})},reload:function(){var t,e=this;this.$confirm("此操作将重新载入规则, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t=e.secReq(e.api.save2js,"post",{action:"reload"}),t.hasOwnProperty("code")&&"ok"===t.code?(e.$notify({type:"success",title:"提示",message:"重新载入规则成功",duration:4e3}),window.location.reload()):e.$notify({type:"warning",title:"提示",message:t.msg,duration:4e3})}).catch(function(){e.$message({type:"info",message:"已取消"})})},restart:function(){var t,e=this;this.$confirm("此操作将重启服务, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t=e.secReq(e.api.reload,"post",{action:"reload"}),t.hasOwnProperty("code")&&"ok"===t.code?e.$notify({type:"success",title:"提示",message:"服务重启成功",duration:4e3}):e.$notify({type:"warning",title:"提示",message:t.msg,duration:4e3})}).catch(function(){e.$message({type:"info",message:"已取消"})})},logout:function(){var t;this.deleteCookie("openstar",null),t=this.secReq(this.api.logout,"get",{}),t.hasOwnProperty("code")&&"ok"===t.code?(window.localStorage.removeItem("version"),window.localStorage.removeItem("master"),this.$router.push("/login")):this.$notify({type:"warning",title:"提示",message:t.msg,duration:4e3})},saveAll:function(){var t;t=this.secReq(this.api.save2js+"?action=save&mod=all_Mod","get",{}),t.hasOwnProperty("code")&&"ok"===t.code?this.$notify({type:"success",title:"提示",message:"保存成功",duration:4e3}):this.$notify({type:"warning",title:"提示",message:t.msg,duration:4e3})},initMaster:function(){var t,e,n=window.localStorage.getItem("master","");n&&n.length>2?console.log("no master",document.cookie):(t={action:"get",mod:"base",id:"autoSync@state"},e=this.secReq(this.api.globalConfig,"get",t),e.hasOwnProperty("code")&&"ok"===e.code?window.localStorage.setItem("master",e.msg):window.localStorage.setItem("master",""))}}}),s=i,r=(n("6f8d"),n("2877")),c=Object(r["a"])(s,o,a,!1,null,null,null);e["default"]=c.exports},"6f8d":function(t,e,n){"use strict";var o=n("d10d"),a=n.n(o);a.a},"7f7f":function(t,e,n){var o=n("86cc").f,a=Function.prototype,i=/^\s*function ([^ (]*)/,s="name";s in a||n("9e1e")&&o(a,s,{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(t){return""}}})},d10d:function(t,e,n){}}]);