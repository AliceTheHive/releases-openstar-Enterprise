(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4b3bfac0"],{4127:function(t,e,i){"use strict";var r=i("d233"),o=i("b313"),a={brackets:function(t){return t+"[]"},indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},n=Date.prototype.toISOString,s={delimiter:"&",encode:!0,encoder:r.encode,encodeValuesOnly:!1,serializeDate:function(t){return n.call(t)},skipNulls:!1,strictNullHandling:!1},c=function t(e,i,o,a,n,c,l,d,p,f,u,h){var g=e;if("function"===typeof l)g=l(i,g);else if(g instanceof Date)g=f(g);else if(null===g){if(a)return c&&!h?c(i,s.encoder):i;g=""}if("string"===typeof g||"number"===typeof g||"boolean"===typeof g||r.isBuffer(g)){if(c){var y=h?i:c(i,s.encoder);return[u(y)+"="+u(c(g,s.encoder))]}return[u(i)+"="+u(String(g))]}var m,b=[];if("undefined"===typeof g)return b;if(Array.isArray(l))m=l;else{var D=Object.keys(g);m=d?D.sort(d):D}for(var v=0;v<m.length;++v){var w=m[v];n&&null===g[w]||(b=Array.isArray(g)?b.concat(t(g[w],o(i,w),o,a,n,c,l,d,p,f,u,h)):b.concat(t(g[w],i+(p?"."+w:"["+w+"]"),o,a,n,c,l,d,p,f,u,h)))}return b};t.exports=function(t,e){var i=t,n=e?r.assign({},e):{};if(null!==n.encoder&&void 0!==n.encoder&&"function"!==typeof n.encoder)throw new TypeError("Encoder has to be a function.");var l="undefined"===typeof n.delimiter?s.delimiter:n.delimiter,d="boolean"===typeof n.strictNullHandling?n.strictNullHandling:s.strictNullHandling,p="boolean"===typeof n.skipNulls?n.skipNulls:s.skipNulls,f="boolean"===typeof n.encode?n.encode:s.encode,u="function"===typeof n.encoder?n.encoder:s.encoder,h="function"===typeof n.sort?n.sort:null,g="undefined"!==typeof n.allowDots&&n.allowDots,y="function"===typeof n.serializeDate?n.serializeDate:s.serializeDate,m="boolean"===typeof n.encodeValuesOnly?n.encodeValuesOnly:s.encodeValuesOnly;if("undefined"===typeof n.format)n.format=o["default"];else if(!Object.prototype.hasOwnProperty.call(o.formatters,n.format))throw new TypeError("Unknown format option provided.");var b,D,v=o.formatters[n.format];"function"===typeof n.filter?(D=n.filter,i=D("",i)):Array.isArray(n.filter)&&(D=n.filter,b=D);var w,$=[];if("object"!==typeof i||null===i)return"";w=n.arrayFormat in a?n.arrayFormat:"indices"in n?n.indices?"indices":"repeat":"indices";var j=a[w];b||(b=Object.keys(i)),h&&b.sort(h);for(var O=0;O<b.length;++O){var x=b[O];p&&null===i[x]||($=$.concat(c(i[x],x,j,d,p,f?u:null,D,h,g,y,v,m)))}var k=$.join(l),_=!0===n.addQueryPrefix?"?":"";return k.length>0?_+k:""}},4328:function(t,e,i){"use strict";var r=i("4127"),o=i("9e6a"),a=i("b313");t.exports={formats:a,parse:o,stringify:r}},"94ba":function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-card",{attrs:{shadow:"never"}},[i("wafDomainDiag",{ref:"addDiag",on:{diagAdd:t.addData,diagEdit:t.addData}}),i("wafDomainBatDiag",{ref:"addBatDiag",on:{diagAdd:t.addBat}}),i("el-row",{staticStyle:{"margin-bottom":"10px","margin-left":"10px"},attrs:{gutter:10}},[i("div",{staticStyle:{width:"300px",float:"left"}},[i("el-input",{attrs:{"prefix-icon":"el-icon-search",placeholder:"请输入搜索内容"},model:{value:t.ruleSearch,callback:function(e){t.ruleSearch=e},expression:"ruleSearch"}})],1),i("div",{staticStyle:{float:"right"}},[i("el-button",{attrs:{type:"primary",size:"mini",round:""},on:{click:function(e){t.viewBatDiag()}}},[t._v("批量添加")]),i("el-button",{attrs:{type:"primary",size:"mini",round:""},on:{click:function(e){t.viewDiag()}}},[t._v("添加域名")]),i("el-button",{attrs:{type:"primary",size:"mini",round:""},on:{click:t.saveRule}},[t._v("保存为JSON")])],1)]),i("wafDivider"),i("el-row",{staticStyle:{"margin-top":"20px","margin-bottom":"20px","margin-left":"10px"},attrs:{gutter:10}},[i("wafDomainTable",{ref:"wafTable",attrs:{data:t.data},on:{del:t.delData,edit:t.viewDiag}})],1)],1)],1)},o=[],a=(i("6b54"),i("cebe")),n=i.n(a),s=i("4328"),c=i.n(s),l=function(){return i.e("chunk-24bbae2e").then(i.bind(null,"0882"))},d=function(){return i.e("chunk-2d21049c").then(i.bind(null,"b6f8"))},p=function(){return i.e("chunk-2d0e5b74").then(i.bind(null,"9656"))},f=function(){return i.e("chunk-2d0bd18a").then(i.bind(null,"2b15"))},u={data:function(){return{ruleSearch:"",temp:[],data:[],count:0,certs_set:[]}},mounted:function(){this.initConfig()},methods:{addBat:function(t){var e,i,r=this;e={list:t},i=r.secReq(r.api.domainBatManage,"post",e),"ok"==i.code?(r.initConfig(),r.$notify({type:"success",title:"提示",message:"应用成功",duration:1500,position:"bottom-right"})):r.$notify({type:"warning",title:"提示",message:i.msg,duration:1500,position:"bottom-right"})},saveRule:function(){var t=this.secReq(this.api.save2js,"post",{action:"save",mod:"nginx_Mod"});t.hasOwnProperty("code")&&"ok"===t.code?this.$notify({type:"success",title:"提示",message:"应用成功",duration:1500,position:"bottom-right"}):this.$notify({type:"warning",title:"提示",message:t.msg,duration:1500,position:"bottom-right"})},initConfig:function(){var t=this,e={host:"all_host",cer:!0},i=[n.a.post(t.api.domainManage1+"/get",c.a.stringify(e)),n.a.get(t.api.certificate+"/get")];n.a.all(i).then(n.a.spread(function(e,i){if(200==e.status){if("ok"==e.data.code){var r=e.data,o=[];for(var a in r.msg)if("state"!==a&&"count"!==a){var n={};n.host=r.msg[a].host,n.proxy_protocol=r.msg[a].proxy_protocol,n.protocol=r.msg[a].protocol,n.protect="on",n.isRewrite_https=r.msg[a].isRewrite_https,n.port=r.msg[a].port,n.cname=r.msg[a].cname,n.ips=r.msg[a].ips.toString(),n.certs_key=r.msg[a].ssl["certs_key"],n.isHttp2=r.msg[a].isHttp2,o.push(n)}t.data=o,t.temp=o,t.count=t.data.length}}else this.$notify({type:"warning",title:"提示",message:e.data.msg,duration:1500,position:"bottom-right"});if(200==i.status)if("ok"===i.data.code){var s=[],c=i.data.msg;for(var a in c){var l={};l["label"]=c[a],l["value"]=c[a],s.push(l)}t.certs_set=s}else t.$notify({type:"warning",title:"提示",message:i.data.msg,duration:1500,position:"bottom-right"});else this.$notify({type:"warning",title:"提示",message:i.data.msg,duration:1500,position:"bottom-right"})}))},viewDiag:function(t){void 0===t?(this.$refs.addDiag.title="添加",this.$refs.addDiag.host="",this.$refs.addDiag.editRule=!1,this.$refs.addDiag.proxy_protocol="http",this.$refs.addDiag.protocol="http",this.$refs.addDiag.protocolShow=!0,this.$refs.addDiag.isRewrite_https=!1,this.$refs.addDiag.port=80,this.$refs.addDiag.cname="cname_ip",this.$refs.addDiag.ips="",this.$refs.addDiag.options=this.certs_set,this.$refs.addDiag.certs_key="",this.$refs.addDiag.advanceShow=!1):(this.$refs.addDiag.title="编辑",this.$refs.addDiag.host=t.host,this.$refs.addDiag.editRule=!0,this.$refs.addDiag.proxy_protocol=t.proxy_protocol,this.$refs.addDiag.protocol=t.protocol,"https"===this.$refs.addDiag.protocol?this.$refs.addDiag.protocolShow=!1:this.$refs.addDiag.protocolShow=!0,this.$refs.addDiag.isRewrite_https=t.isRewrite_https,this.$refs.addDiag.port=t.port,this.$refs.addDiag.cname="cname_ip",this.$refs.addDiag.ips=t.ips,this.$refs.addDiag.options=this.certs_set,this.$refs.addDiag.certs_key=t.certs_key,this.$refs.addDiag.advanceShow=!0),this.$refs.addDiag.wafRuleVisible=!0},viewBatDiag:function(){this.$refs.addBatDiag.wafBatRuleVisible=!0},addData:function(){var t,e;"http"===this.$refs.addDiag.protocol?t={host:this.$refs.addDiag.host,ips:this.$refs.addDiag.ips,isRewrite_https:this.$refs.addDiag.isRewrite_https,port:this.port,protocol:this.$refs.addDiag.protocol,proxy_protocol:this.$refs.addDiag.proxy_protocol}:"https"===this.$refs.addDiag.protocol&&(t={host:this.$refs.addDiag.host,ips:this.$refs.addDiag.ips,isHttp2:!0,port:this.$refs.addDiag.port,protocol:this.$refs.addDiag.protocol,proxy_protocol:this.$refs.addDiag.proxy_protocol,certs_key:this.$refs.addDiag.certs_key}),"添加"===this.$refs.addDiag.title?e=this.secReq(this.api.domainManage+"/add","post",t):"编辑"===this.$refs.addDiag.title?e=this.secReq(this.api.domainManage+"/set","post",t):"高级编辑"===this.$refs.addDiag.title&&(t={host:this.$refs.addDiag.host,protocol:this.$refs.addDiag.protocol,type:!0,value:encodeURIComponent(this.b64Encode(this.$refs.addDiag.advance))},e=this.secReq(this.api.domainManage+"/set","post",t)),"ok"==e.code?(this.initConfig(),this.$notify({type:"success",title:"提示",message:"应用成功",duration:1500,position:"bottom-right"})):this.$notify({type:"warning",title:"提示",message:e.msg,duration:1500,position:"bottom-right"}),this.$refs.addDiag.wafRuleVisible=!1},delData:function(t){var e,i;e={host:t.host,protocol:t.protocol},i=this.secReq(this.api.domainManage+"/del","post",e),"ok"==i.code?(this.initConfig(),this.$notify({type:"success",title:"提示",message:"应用成功",duration:1500,position:"bottom-right"})):this.$notify({type:"warning",title:"提示",message:i.msg,duration:1500,position:"bottom-right"})}},components:{wafDivider:l,wafDomainTable:d,wafDomainDiag:p,wafDomainBatDiag:f},watch:{$route:function(t,e){},ruleSearch:{handler:function(t,e){this.data=""===t?this.temp:this.temp.filter(function(e){if(e.host.indexOf(t)>=0)return!0})}}}},h=u,g=i("2877"),y=Object(g["a"])(h,r,o,!1,null,null,null);e["default"]=y.exports},"9e6a":function(t,e,i){"use strict";var r=i("d233"),o=Object.prototype.hasOwnProperty,a={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:r.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},n=function(t,e){for(var i={},r=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,n=e.parameterLimit===1/0?void 0:e.parameterLimit,s=r.split(e.delimiter,n),c=0;c<s.length;++c){var l,d,p=s[c],f=p.indexOf("]="),u=-1===f?p.indexOf("="):f+1;-1===u?(l=e.decoder(p,a.decoder),d=e.strictNullHandling?null:""):(l=e.decoder(p.slice(0,u),a.decoder),d=e.decoder(p.slice(u+1),a.decoder)),o.call(i,l)?i[l]=[].concat(i[l]).concat(d):i[l]=d}return i},s=function(t,e,i){for(var r=e,o=t.length-1;o>=0;--o){var a,n=t[o];if("[]"===n)a=[],a=a.concat(r);else{a=i.plainObjects?Object.create(null):{};var s="["===n.charAt(0)&&"]"===n.charAt(n.length-1)?n.slice(1,-1):n,c=parseInt(s,10);!isNaN(c)&&n!==s&&String(c)===s&&c>=0&&i.parseArrays&&c<=i.arrayLimit?(a=[],a[c]=r):a[s]=r}r=a}return r},c=function(t,e,i){if(t){var r=i.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,a=/(\[[^[\]]*])/,n=/(\[[^[\]]*])/g,c=a.exec(r),l=c?r.slice(0,c.index):r,d=[];if(l){if(!i.plainObjects&&o.call(Object.prototype,l)&&!i.allowPrototypes)return;d.push(l)}var p=0;while(null!==(c=n.exec(r))&&p<i.depth){if(p+=1,!i.plainObjects&&o.call(Object.prototype,c[1].slice(1,-1))&&!i.allowPrototypes)return;d.push(c[1])}return c&&d.push("["+r.slice(c.index)+"]"),s(d,e,i)}};t.exports=function(t,e){var i=e?r.assign({},e):{};if(null!==i.decoder&&void 0!==i.decoder&&"function"!==typeof i.decoder)throw new TypeError("Decoder has to be a function.");if(i.ignoreQueryPrefix=!0===i.ignoreQueryPrefix,i.delimiter="string"===typeof i.delimiter||r.isRegExp(i.delimiter)?i.delimiter:a.delimiter,i.depth="number"===typeof i.depth?i.depth:a.depth,i.arrayLimit="number"===typeof i.arrayLimit?i.arrayLimit:a.arrayLimit,i.parseArrays=!1!==i.parseArrays,i.decoder="function"===typeof i.decoder?i.decoder:a.decoder,i.allowDots="boolean"===typeof i.allowDots?i.allowDots:a.allowDots,i.plainObjects="boolean"===typeof i.plainObjects?i.plainObjects:a.plainObjects,i.allowPrototypes="boolean"===typeof i.allowPrototypes?i.allowPrototypes:a.allowPrototypes,i.parameterLimit="number"===typeof i.parameterLimit?i.parameterLimit:a.parameterLimit,i.strictNullHandling="boolean"===typeof i.strictNullHandling?i.strictNullHandling:a.strictNullHandling,""===t||null===t||"undefined"===typeof t)return i.plainObjects?Object.create(null):{};for(var o="string"===typeof t?n(t,i):t,s=i.plainObjects?Object.create(null):{},l=Object.keys(o),d=0;d<l.length;++d){var p=l[d],f=c(p,o[p],i);s=r.merge(s,f,i)}return r.compact(s)}},b313:function(t,e,i){"use strict";var r=String.prototype.replace,o=/%20/g;t.exports={default:"RFC3986",formatters:{RFC1738:function(t){return r.call(t,o,"+")},RFC3986:function(t){return t}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},d233:function(t,e,i){"use strict";var r=Object.prototype.hasOwnProperty,o=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),a=function(t){var e;while(t.length){var i=t.pop();if(e=i.obj[i.prop],Array.isArray(e)){for(var r=[],o=0;o<e.length;++o)"undefined"!==typeof e[o]&&r.push(e[o]);i.obj[i.prop]=r}}return e},n=function(t,e){for(var i=e&&e.plainObjects?Object.create(null):{},r=0;r<t.length;++r)"undefined"!==typeof t[r]&&(i[r]=t[r]);return i},s=function t(e,i,o){if(!i)return e;if("object"!==typeof i){if(Array.isArray(e))e.push(i);else{if("object"!==typeof e)return[e,i];(o.plainObjects||o.allowPrototypes||!r.call(Object.prototype,i))&&(e[i]=!0)}return e}if("object"!==typeof e)return[e].concat(i);var a=e;return Array.isArray(e)&&!Array.isArray(i)&&(a=n(e,o)),Array.isArray(e)&&Array.isArray(i)?(i.forEach(function(i,a){r.call(e,a)?e[a]&&"object"===typeof e[a]?e[a]=t(e[a],i,o):e.push(i):e[a]=i}),e):Object.keys(i).reduce(function(e,a){var n=i[a];return r.call(e,a)?e[a]=t(e[a],n,o):e[a]=n,e},a)},c=function(t,e){return Object.keys(e).reduce(function(t,i){return t[i]=e[i],t},t)},l=function(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}},d=function(t){if(0===t.length)return t;for(var e="string"===typeof t?t:String(t),i="",r=0;r<e.length;++r){var a=e.charCodeAt(r);45===a||46===a||95===a||126===a||a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122?i+=e.charAt(r):a<128?i+=o[a]:a<2048?i+=o[192|a>>6]+o[128|63&a]:a<55296||a>=57344?i+=o[224|a>>12]+o[128|a>>6&63]+o[128|63&a]:(r+=1,a=65536+((1023&a)<<10|1023&e.charCodeAt(r)),i+=o[240|a>>18]+o[128|a>>12&63]+o[128|a>>6&63]+o[128|63&a])}return i},p=function(t){for(var e=[{obj:{o:t},prop:"o"}],i=[],r=0;r<e.length;++r)for(var o=e[r],n=o.obj[o.prop],s=Object.keys(n),c=0;c<s.length;++c){var l=s[c],d=n[l];"object"===typeof d&&null!==d&&-1===i.indexOf(d)&&(e.push({obj:n,prop:l}),i.push(d))}return a(e)},f=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},u=function(t){return null!==t&&"undefined"!==typeof t&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))};t.exports={arrayToObject:n,assign:c,compact:p,decode:l,encode:d,isBuffer:u,isRegExp:f,merge:s}}}]);