(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b631c"],{"1bb7":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-dialog",{attrs:{title:e.title,visible:e.isVisible,width:"50%","close-on-click-modal":!1},on:{"update:visible":function(t){e.isVisible=t}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:"添加"===e.title||"编辑"===e.title||"查看"===e.title,expression:"title ==='添加' || title ==='编辑' || title ==='查看'  "}],staticClass:"modal-body col-sm-12"},[i("el-form",{ref:"form",attrs:{"label-width":"90px","label-position":"left"}},[i("el-form-item",{attrs:{label:"域名"}},["查看"===e.title||"编辑"===e.title?i("el-input",{attrs:{disabled:"",placeholder:"www.xxx.com"},model:{value:e.domain_name,callback:function(t){e.domain_name=t},expression:"domain_name"}}):i("el-input",{model:{value:e.domain_name,callback:function(t){e.domain_name=t},expression:"domain_name"}})],1),i("el-form-item",{attrs:{label:"证书公钥"}},["查看"===e.title?i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.ssl_certificate,expression:"ssl_certificate"}],staticStyle:{width:"100%"},attrs:{rows:"20",disabled:"",placeholder:"证书完整的字符串"},domProps:{value:e.ssl_certificate},on:{input:function(t){t.target.composing||(e.ssl_certificate=t.target.value)}}}):i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.ssl_certificate,expression:"ssl_certificate"}],staticStyle:{width:"100%"},attrs:{rows:"20",placeholder:"证书完整的字符串"},domProps:{value:e.ssl_certificate},on:{input:function(t){t.target.composing||(e.ssl_certificate=t.target.value)}}})]),i("el-form-item",{attrs:{label:"证书私钥"}},["查看"===e.title?i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.ssl_certificate_key,expression:"ssl_certificate_key"}],staticStyle:{width:"100%"},attrs:{rows:"20",disabled:"",placeholder:"证书完整的字符串"},domProps:{value:e.ssl_certificate_key},on:{input:function(t){t.target.composing||(e.ssl_certificate_key=t.target.value)}}}):i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.ssl_certificate_key,expression:"ssl_certificate_key"}],staticStyle:{width:"100%"},attrs:{rows:"20",placeholder:"证书完整的字符串"},domProps:{value:e.ssl_certificate_key},on:{input:function(t){t.target.composing||(e.ssl_certificate_key=t.target.value)}}})])],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("取 消")]),i("el-button",{directives:[{name:"show",rawName:"v-show",value:"添加"===e.title,expression:"title === '添加' "}],attrs:{type:"primary"},on:{click:e.setData}},[e._v("添加")]),i("el-button",{directives:[{name:"show",rawName:"v-show",value:"编辑"===e.title,expression:"title === '编辑' "}],attrs:{type:"primary"},on:{click:e.setData}},[e._v("编辑")])],1)]),i("el-card",{attrs:{shadow:"never"}},[i("el-row",{staticStyle:{"margin-bottom":"20px","margin-left":"10px"},attrs:{gutter:10}},[i("div",{staticStyle:{width:"300px",float:"left"}},[i("el-input",{attrs:{"prefix-icon":"el-icon-search",placeholder:"请输入搜索内容"},model:{value:e.ruleSearch,callback:function(t){e.ruleSearch=t},expression:"ruleSearch"}})],1),i("div",{staticStyle:{float:"right"}},[i("el-button",{attrs:{type:"primary",size:"mini",round:""},on:{click:e.addDiag}},[e._v("添加证书")])],1)]),i("wafDivider"),i("el-table",{ref:"multipleTable",staticStyle:{"margin-top":"20px",width:"100%"},attrs:{"tooltip-effect":"dark",data:e.results}},[i("el-table-column",{attrs:{label:"ID",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t"+e._s(t.$index+1)+"\n\t\t\t\t")]}}])}),i("el-table-column",{attrs:{label:"证书域名","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t"+e._s(t.row.domain_name)+"\n\t\t\t\t")]}}])},[e._v(" >\n\t\t\t\t")]),i("el-table-column",{attrs:{label:"操作",width:"360"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"warning",plain:"",size:"mini"},on:{click:function(i){e.showDiag(t.row,t.$index)}}},[i("i",{staticClass:"fa fa-check"}),e._v(" 查看证书")]),i("el-button",{attrs:{type:"success",plain:"",size:"mini"},on:{click:function(i){e.editDiag(t.row,t.$index)}}},[i("i",{staticClass:"fa fa-edit"}),e._v(" 修改证书")]),i("el-button",{attrs:{type:"danger",plain:"",size:"mini"},on:{click:function(i){e.delData(t.row.domain_name)}}},[i("i",{staticClass:"fa fa-close"}),e._v(" 删除")])]}}])})],1),i("Pagination",{staticStyle:{"margin-top":"20px","margin-bottom":"20px"},attrs:{pageSizes:e.pageSizes,pageSize:e.pageSize,pageTotal:e.pageTotal,currentPage:e.currentPage},on:{handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange}})],1)],1)},s=[];i("a481"),i("cadf"),i("551c"),i("097d");function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:+new Date,t=new Date(e+288e5);return t.toJSON().substr(0,19).replace("T"," ")}var o=function(){return i.e("chunk-24bbae2e").then(i.bind(null,"0882"))},r=function(){return i.e("chunk-2d0cf63b").then(i.bind(null,"6407"))},l={data:function(){return{ruleSearch:"",temp:[],results:[],pageTable:[],pageSizes:[5,10,20],pageSize:10,currentPage:1,pageTotal:0,isVisible:!1,title:"",edit_domain:"",domain_name:"",ssl_certificate_key:"",ssl_certificate:"",certs_key:""}},mounted:function(){this.initData()},methods:{initData:function(){var e=this,t=e.secReq(e.api.certificate+"/get","get",{});if(t.hasOwnProperty("code")&&"ok"===t.code){var i=new Array,a=t.msg;for(var s in a){var n={};n["domain_name"]=a[s],i.push(n)}e.temp=i,e.pageTable=i,e.pageTotal=i.length,e.handleCurrentChange(1)}else e.$notify({type:"warning",title:"提示",message:t.msg,duration:1500,position:"bottom-right"})},showDiag:function(e,t){var i=this;i.domain_name=e.domain_name;var a=i.secReq(i.api.certificate+"/get","post",{certs_key:i.domain_name});if(a.hasOwnProperty("code")&&"ok"===a.code){var s=a.msg;i.ssl_certificate_key=i.b64Decode(s.ssl_certificate_key),i.ssl_certificate=i.b64Decode(s.ssl_certificate),i.title="查看",i.isVisible=!0}else i.$notify({type:"warning",title:"提示",message:a.msg,duration:1500,position:"bottom-right"})},addDiag:function(){var e=this;e.domain_name="",e.edit_domain="",e.ssl_certificate_key="",e.ssl_certificate="",e.title="添加",e.isVisible=!0},editDiag:function(e,t){var i=this;i.domain_name=e.domain_name,i.edit_domain=e.domain_name;var a=i.secReq(i.api.certificate+"/get","post",{certs_key:i.domain_name});if(a.hasOwnProperty("code")&&"ok"===a.code){var s=a.msg;i.ssl_certificate_key=i.b64Decode(s.ssl_certificate_key),i.ssl_certificate=i.b64Decode(s.ssl_certificate),i.title="编辑",i.isVisible=!0}else i.$notify({type:"warning",title:"提示",message:a.msg,duration:1500,position:"bottom-right"})},delData:function(e){var t=this,i=t.secReq(t.api.certificate_cluster+"/del","get",{certs_key:e});i.hasOwnProperty("code")&&"ok"===i.code?(t.$notify({type:"success",title:"提示",message:"删除成功",duration:1500,position:"bottom-right"}),t.initData()):t.$notify({type:"warning",title:"提示",message:i.msg,duration:1500,position:"bottom-right"})},setData:function(){var e=this,t=e.title;if("添加"===t){var i={e_time:n(),ssl_certificate:e.b64Encode(e.ssl_certificate),ssl_certificate_key:e.b64Encode(e.ssl_certificate_key)},a=e.secReq(e.api.certificate_cluster+"/add","post",{certs_key:e.domain_name,value:JSON.stringify(i)});a.hasOwnProperty("code")&&"ok"===a.code?(e.$notify({type:"success",title:"提示",message:"添加成功",duration:1500,position:"bottom-right"}),e.initData()):e.$notify({type:"warning",title:"提示",message:a.msg,duration:1500,position:"bottom-right"})}else{i={e_time:n(),ssl_certificate:e.b64Encode(e.ssl_certificate),ssl_certificate_key:e.b64Encode(e.ssl_certificate_key)},a=e.secReq(e.api.certificate_cluster+"/set","post",{certs_key:e.edit_domain,value:JSON.stringify(i)});a.hasOwnProperty("code")&&"ok"===a.code?(e.$notify({type:"success",title:"提示",message:"修改成功",duration:1500,position:"bottom-right"}),e.initData()):e.$notify({type:"warning",title:"提示",message:a.msg,duration:1500,position:"bottom-right"})}e.isVisible=!1},handleSizeChange:function(e){var t=this;t.currentPage=1,t.pageSize=e,t.results=t.pageTable.slice(0,0+e)},handleCurrentChange:function(e){var t=this;1===t.pageSize?t.results=t.pageTable.slice(0,e*t.pageSize):t.results=t.pageTable.slice(e*t.pageSize-t.pageSize,e*t.pageSize)}},filters:{matchState:function(e){return tt}},components:{wafDivider:o,Pagination:r},watch:{$route:function(e,t){},ruleSearch:{handler:function(e,t){var i=this;i.results=""===e?i.temp:i.temp.filter(function(t){if(t.func_name.indexOf(e)>=0)return!0})}}}},c=l,d=i("2877"),m=Object(d["a"])(c,a,s,!1,null,null,null);t["default"]=m.exports}}]);