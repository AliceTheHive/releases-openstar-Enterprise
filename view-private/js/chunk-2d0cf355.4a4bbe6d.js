(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0cf355"],{6379:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-dialog",{attrs:{title:e.title,visible:e.isVisible,width:"40%","close-on-click-modal":!1},on:{"update:visible":function(t){e.isVisible=t}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:"添加"===e.title||"编辑"===e.title,expression:"title ==='添加' || title ==='编辑'  "}],staticClass:"modal-body col-sm-12"},[n("el-form",{ref:"form",attrs:{"label-width":"90px","label-position":"left"}},[n("el-form-item",{attrs:{label:"文件名称"}},[n("el-input",{model:{value:e.file_name,callback:function(t){e.file_name=t},expression:"file_name"}})],1),n("el-form-item",{attrs:{label:"函数名称"}},[n("el-input",{model:{value:e.func_name,callback:function(t){e.func_name=t},expression:"func_name"}})],1),n("el-form-item",{attrs:{label:"描述"}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.desc,expression:"desc"}],staticStyle:{width:"100%"},attrs:{rows:"3"},domProps:{value:e.desc},on:{input:function(t){t.target.composing||(e.desc=t.target.value)}}})]),n("el-form-item",{attrs:{label:"函数内容"}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.contents,expression:"contents"}],staticStyle:{width:"100%"},attrs:{rows:"10"},domProps:{value:e.contents},on:{input:function(t){t.target.composing||(e.contents=t.target.value)}}})])],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("取 消")]),n("el-button",{directives:[{name:"show",rawName:"v-show",value:"添加"===e.title,expression:"title === '添加' "}],attrs:{type:"primary"},on:{click:e.setData}},[e._v("添加")]),n("el-button",{directives:[{name:"show",rawName:"v-show",value:"编辑"===e.title,expression:"title === '编辑' "}],attrs:{type:"primary"},on:{click:e.setData}},[e._v("编辑")])],1)]),n("el-card",{attrs:{shadow:"never"}},[n("el-row",{staticStyle:{"margin-bottom":"20px","margin-left":"10px"},attrs:{gutter:10}},[n("div",{staticStyle:{width:"300px",float:"left"}},[n("el-input",{attrs:{"prefix-icon":"el-icon-search",placeholder:"请输入搜索内容"},model:{value:e.ruleSearch,callback:function(t){e.ruleSearch=t},expression:"ruleSearch"}})],1),n("div",{staticStyle:{float:"right"}},[n("el-button",{attrs:{type:"primary",size:"mini",round:""},on:{click:e.showDiag}},[e._v("添加插件")])],1)]),n("wafDivider"),n("el-table",{ref:"multipleTable",staticStyle:{"margin-top":"20px",width:"100%"},attrs:{"tooltip-effect":"dark",data:e.results}},[n("el-table-column",{attrs:{label:"ID",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t"+e._s(t.$index+1)+"\n\t\t\t\t")]}}])}),n("el-table-column",{attrs:{label:"函数名称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t"+e._s(t.row.func_name)+"\n\t\t\t\t")]}}])}),n("el-table-column",{attrs:{label:"文件名称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t"+e._s(t.row.file)+"\n\t\t\t\t")]}}])}),n("el-table-column",{attrs:{label:"函数内容","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t"+e._s(t.row.contents)+" \n\t\t\t\t")]}}])}),n("el-table-column",{attrs:{label:"描述",width:"300","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t"+e._s(t.row.description)+" \n\t\t\t\t")]}}])}),n("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"danger",plain:"",size:"mini"},on:{click:function(n){e.delData(t.row.func_name)}}},[n("i",{staticClass:"fa fa-close"}),e._v(" 删除")]),n("el-button",{attrs:{type:"success",plain:"",size:"mini"},on:{click:function(n){e.editDiag(t.row,t.$index)}}},[n("i",{staticClass:"fa fa-edit"}),e._v(" 编辑")])]}}])})],1),n("Pagination",{staticStyle:{"margin-top":"20px","margin-bottom":"20px"},attrs:{pageSizes:e.pageSizes,pageSize:e.pageSize,pageTotal:e.pageTotal,currentPage:e.currentPage},on:{handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange}})],1)],1)},a=[],l=function(){return n.e("chunk-24bbae2e").then(n.bind(null,"0882"))},s=function(){return n.e("chunk-2d0cf63b").then(n.bind(null,"6407"))},o={data:function(){return{ruleSearch:"",temp:[],results:[],pageTable:[],pageSizes:[5,10,20],pageSize:10,currentPage:1,pageTotal:0,isVisible:!1,title:"",id:0,func_name:"",file_name:"",contents:"",desc:""}},mounted:function(){this.initData()},methods:{initData:function(){var e=this,t=e.secReq(e.api.plugins+"/get","get",{id:"all_Mod"});if(t.hasOwnProperty("code")&&"ok"===t.code){var n=new Array,i=t.msg;for(var a in i)if("count"!=a){var l={};l=i[a],l["func_name"]=a,l["contents"]=e.b64Decode(i[a]["contents"]),n.push(l)}e.temp=n,e.pageTable=n,e.pageTotal=n.length,e.handleCurrentChange(1)}else e.$notify({type:"warning",title:"提示",message:t.msg,duration:1500})},showDiag:function(){var e=this;e.func_name="",e.file_name="",e.contents="",e.desc="",e.title="添加",e.isVisible=!0},editDiag:function(e,t){var n=this;n.id=t,n.func_name=e.func_name,n.file_name=e.file,n.contents=e.contents,n.desc=e.description,n.title="编辑",n.isVisible=!0},delData:function(e){var t=this,n=t.secReq(t.api.plugins+"/del","get",{id:e});n.hasOwnProperty("code")&&"ok"===n.code?(t.$notify({type:"success",title:"提示",message:"删除成功",duration:1500}),t.initData()):t.$notify({type:"warning",title:"提示",message:n.msg,duration:1500})},setData:function(){var e=this,t=e.title;if("添加"===t){var n={file:e.file_name,contents:e.b64Encode(e.contents),description:e.b64Encode(e.desc)},i=e.secReq(e.api.plugins+"/add","post",{id:e.func_name,value:JSON.stringify(n)});i.hasOwnProperty("code")&&"ok"===i.code?(e.$notify({type:"success",title:"提示",message:"添加成功",duration:1500}),e.initData()):e.$notify({type:"warning",title:"提示",message:i.msg,duration:1500})}else{new Object,n={file:e.file_name,contents:e.b64Encode(e.contents),description:e.b64Encode(e.desc)},i=e.secReq(e.api.plugins+"/set","post",{id:e.func_name,value:JSON.stringify(n)});i.hasOwnProperty("code")&&"ok"===i.code?(e.$notify({type:"success",title:"提示",message:"修改成功",duration:1500}),e.initData()):e.$notify({type:"warning",title:"提示",message:i.msg,duration:1500})}console.log(e.title,"ops"),e.isVisible=!1},handleSizeChange:function(e){var t=this;t.currentPage=1,t.pageSize=e,t.results=t.pageTable.slice(0,0+e)},handleCurrentChange:function(e){var t=this;1===t.pageSize?t.results=t.pageTable.slice(0,e*t.pageSize):t.results=t.pageTable.slice(e*t.pageSize-t.pageSize,e*t.pageSize)}},filters:{matchState:function(e){return tt}},components:{wafDivider:l,Pagination:s},watch:{$route:function(e,t){},ruleSearch:{handler:function(e,t){var n=this;n.results=""===e?n.temp:n.temp.filter(function(t){if(t.func_name.indexOf(e)>=0)return!0})}}}},r=o,c=n("2877"),u=Object(c["a"])(r,i,a,!1,null,null,null);t["default"]=u.exports}}]);