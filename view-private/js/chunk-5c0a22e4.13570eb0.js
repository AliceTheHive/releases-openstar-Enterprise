(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5c0a22e4"],{4127:function(t,e,i){"use strict";var r=i("d233"),o=i("b313"),a={brackets:function(t){return t+"[]"},indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},s=Date.prototype.toISOString,n={delimiter:"&",encode:!0,encoder:r.encode,encodeValuesOnly:!1,serializeDate:function(t){return s.call(t)},skipNulls:!1,strictNullHandling:!1},c=function t(e,i,o,a,s,c,l,d,f,p,u,h){var g=e;if("function"===typeof l)g=l(i,g);else if(g instanceof Date)g=p(g);else if(null===g){if(a)return c&&!h?c(i,n.encoder):i;g=""}if("string"===typeof g||"number"===typeof g||"boolean"===typeof g||r.isBuffer(g)){if(c){var y=h?i:c(i,n.encoder);return[u(y)+"="+u(c(g,n.encoder))]}return[u(i)+"="+u(String(g))]}var m,D=[];if("undefined"===typeof g)return D;if(Array.isArray(l))m=l;else{var b=Object.keys(g);m=d?b.sort(d):b}for(var v=0;v<m.length;++v){var w=m[v];s&&null===g[w]||(D=Array.isArray(g)?D.concat(t(g[w],o(i,w),o,a,s,c,l,d,f,p,u,h)):D.concat(t(g[w],i+(f?"."+w:"["+w+"]"),o,a,s,c,l,d,f,p,u,h)))}return D};t.exports=function(t,e){var i=t,s=e?r.assign({},e):{};if(null!==s.encoder&&void 0!==s.encoder&&"function"!==typeof s.encoder)throw new TypeError("Encoder has to be a function.");var l="undefined"===typeof s.delimiter?n.delimiter:s.delimiter,d="boolean"===typeof s.strictNullHandling?s.strictNullHandling:n.strictNullHandling,f="boolean"===typeof s.skipNulls?s.skipNulls:n.skipNulls,p="boolean"===typeof s.encode?s.encode:n.encode,u="function"===typeof s.encoder?s.encoder:n.encoder,h="function"===typeof s.sort?s.sort:null,g="undefined"!==typeof s.allowDots&&s.allowDots,y="function"===typeof s.serializeDate?s.serializeDate:n.serializeDate,m="boolean"===typeof s.encodeValuesOnly?s.encodeValuesOnly:n.encodeValuesOnly;if("undefined"===typeof s.format)s.format=o["default"];else if(!Object.prototype.hasOwnProperty.call(o.formatters,s.format))throw new TypeError("Unknown format option provided.");var D,b,v=o.formatters[s.format];"function"===typeof s.filter?(b=s.filter,i=b("",i)):Array.isArray(s.filter)&&(b=s.filter,D=b);var w,$=[];if("object"!==typeof i||null===i)return"";w=s.arrayFormat in a?s.arrayFormat:"indices"in s?s.indices?"indices":"repeat":"indices";var _=a[w];D||(D=Object.keys(i)),h&&D.sort(h);for(var j=0;j<D.length;++j){var O=D[j];f&&null===i[O]||($=$.concat(c(i[O],O,_,d,f,p?u:null,b,h,g,y,v,m)))}var x=$.join(l),R=!0===s.addQueryPrefix?"?":"";return x.length>0?R+x:""}},4328:function(t,e,i){"use strict";var r=i("4127"),o=i("9e6a"),a=i("b313");t.exports={formats:a,parse:o,stringify:r}},"94ba":function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-card",{attrs:{shadow:"never"}},[i("wafDomainDiag",{ref:"addDiag",on:{diagAdd:t.addData,diagEdit:t.addData}}),i("wafDomainBatDiag",{ref:"addBatDiag",on:{diagAdd:t.addBat}}),i("el-row",{staticStyle:{"margin-bottom":"10px","margin-left":"10px"},attrs:{gutter:10}},[i("div",{staticStyle:{width:"300px",float:"left"}},[i("el-input",{attrs:{"prefix-icon":"el-icon-search",placeholder:"请输入搜索内容"},model:{value:t.ruleSearch,callback:function(e){t.ruleSearch=e},expression:"ruleSearch"}})],1),i("div",{staticStyle:{float:"right"}},[i("el-button",{attrs:{type:"primary",size:"mini",round:""},on:{click:function(e){t.viewBatDiag()}}},[t._v("批量添加")]),i("el-button",{attrs:{type:"primary",size:"mini",round:""},on:{click:function(e){t.viewDiag()}}},[t._v("添加域名")]),i("el-button",{attrs:{type:"primary",size:"mini",round:""},on:{click:t.saveRule}},[t._v("保存为JSON")])],1)]),i("wafDivider"),i("el-row",{staticStyle:{"margin-top":"20px","margin-bottom":"20px","margin-left":"10px"},attrs:{gutter:10}},[i("wafDomainTable",{ref:"wafTable",attrs:{data:t.data},on:{del:t.delData,edit:t.viewDiag}})],1)],1)],1)},o=[],a=(i("6b54"),i("cebe"),i("4328"),function(){return i.e("chunk-24bbae2e").then(i.bind(null,"0882"))}),s=function(){return i.e("chunk-2d21049c").then(i.bind(null,"b6f8"))},n=function(){return i.e("chunk-2d0e5b74").then(i.bind(null,"9656"))},c=function(){return i.e("chunk-2d0bd18a").then(i.bind(null,"2b15"))},l={data:function(){return{ruleSearch:"",temp:[],data:[],count:0}},mounted:function(){this.initConfig()},methods:{addBat:function(t){var e,i,r=this;e={list:t},i=this.secReq(this.api.domainBatManage,"post",e),"ok"==i.code?(r.initConfig(),r.$notify({type:"success",title:"提示",message:"应用成功",duration:4e3})):this.$notify({type:"warning",title:"提示",message:i.msg,duration:4e3})},saveRule:function(){var t=this.secReq(this.api.save2js,"post",{action:"save",mod:"nginx_Mod"});t.hasOwnProperty("code")&&"ok"===t.code?this.$notify({type:"success",title:"提示",message:"应用成功",duration:4e3}):this.$notify({type:"warning",title:"提示",message:t.msg,duration:4e3})},initConfig:function(){var t,e;if(t={host:"all_host",cer:!0},e=this.secReq(this.api.domainManage1+"/get","post",t),"ok"==e.code){var i=[];for(var r in e.msg)if("state"!==r&&"count"!==r){var o={};o.host=e.msg[r].host,o.proxy_protocol=e.msg[r].proxy_protocol,o.protocol=e.msg[r].protocol,o.protect="on",o.isRewrite_https=e.msg[r].isRewrite_https,o.port=e.msg[r].port,o.cname=e.msg[r].cname,o.ips=e.msg[r].ips.toString(),o.ssl_certificate=e.msg[r].ssl.ssl_certificate,o.ssl_certificate_key=e.msg[r].ssl.ssl_certificate_key,o.ssl_verify_client=e.msg[r].ssl.ssl_verify_client,o.ssl_client_certificate=e.msg[r].ssl.ssl_client_certificate,o.isHttp2=e.msg[r].isHttp2,i.push(o)}this.data=i,this.temp=i,this.count=this.data.length}else this.$notify({type:"warning",title:"提示",message:e.msg,duration:4e3})},viewDiag:function(t){void 0===t?(this.$refs.addDiag.title="添加",this.$refs.addDiag.host="",this.$refs.addDiag.editRule=!1,this.$refs.addDiag.proxy_protocol="http",this.$refs.addDiag.protocol="http",this.$refs.addDiag.protocolShow=!0,this.$refs.addDiag.isRewrite_https=!1,this.$refs.addDiag.port=80,this.$refs.addDiag.cname="cname_ip",this.$refs.addDiag.ips="",this.$refs.addDiag.ssl_certificate="",this.$refs.addDiag.ssl_certificate_key="",this.$refs.addDiag.isHttp2=!0,this.$refs.addDiag.advanceShow=!1):(this.$refs.addDiag.title="编辑",this.$refs.addDiag.host=t.host,this.$refs.addDiag.editRule=!0,this.$refs.addDiag.proxy_protocol=t.proxy_protocol,this.$refs.addDiag.protocol=t.protocol,"https"===this.$refs.addDiag.protocol?this.$refs.addDiag.protocolShow=!1:this.$refs.addDiag.protocolShow=!0,this.$refs.addDiag.isRewrite_https=t.isRewrite_https,this.$refs.addDiag.port=t.port,this.$refs.addDiag.cname="cname_ip",this.$refs.addDiag.ips=t.ips,this.$refs.addDiag.ssl_certificate=this.b64Decode(t.ssl_certificate),this.$refs.addDiag.ssl_certificate_key=this.b64Decode(t.ssl_certificate),this.$refs.addDiag.isHttp2=!0,this.$refs.addDiag.advanceShow=!0),this.$refs.addDiag.wafRuleVisible=!0},viewBatDiag:function(){this.$refs.addBatDiag.wafBatRuleVisible=!0},addData:function(){var t,e;"http"===this.$refs.addDiag.protocol?t={host:this.$refs.addDiag.host,ips:this.$refs.addDiag.ips,isRewrite_https:this.$refs.addDiag.isRewrite_https,port:this.port,protocol:this.$refs.addDiag.protocol,proxy_protocol:this.$refs.addDiag.proxy_protocol}:"https"===this.$refs.addDiag.protocol&&(t={host:this.$refs.addDiag.host,ips:this.$refs.addDiag.ips,isHttp2:!0,port:this.$refs.addDiag.port,protocol:this.$refs.addDiag.protocol,proxy_protocol:this.$refs.addDiag.proxy_protocol,ssl_certificate:encodeURIComponent(this.b64Encode(this.$refs.addDiag.ssl_certificate)),ssl_certificate_key:encodeURIComponent(this.b64Encode(this.$refs.addDiag.ssl_certificate_key))}),"添加"===this.$refs.addDiag.title?e=this.secReq(this.api.domainManage+"/add","post",t):"编辑"===this.$refs.addDiag.title?e=this.secReq(this.api.domainManage+"/set","post",t):"高级编辑"===this.$refs.addDiag.title&&(t={host:this.$refs.addDiag.host,protocol:this.$refs.addDiag.protocol,type:!0,value:encodeURIComponent(this.b64Encode(this.$refs.addDiag.advance))},e=this.secReq(this.api.domainManage+"/set","post",t)),"ok"==e.code?(this.initConfig(),this.$notify({type:"success",title:"提示",message:"应用成功",duration:4e3})):this.$notify({type:"warning",title:"提示",message:e.msg,duration:4e3}),this.$refs.addDiag.wafRuleVisible=!1},editData:function(){},delData:function(t){var e,i;e={host:t.host,protocol:t.protocol},i=this.secReq(this.api.domainManage+"/del","post",e),"ok"==i.code?(this.initConfig(),this.$notify({type:"success",title:"提示",message:"应用成功",duration:4e3})):this.$notify({type:"warning",title:"提示",message:i.msg,duration:4e3})}},components:{wafDivider:a,wafDomainTable:s,wafDomainDiag:n,wafDomainBatDiag:c},watch:{$route:function(t,e){},ruleSearch:{handler:function(t,e){this.data=""===t?this.temp:this.temp.filter(function(e){if(e.host.indexOf(t)>=0)return!0})}}}},d=l,f=i("2877"),p=Object(f["a"])(d,r,o,!1,null,null,null);e["default"]=p.exports},"9e6a":function(t,e,i){"use strict";var r=i("d233"),o=Object.prototype.hasOwnProperty,a={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:r.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},s=function(t,e){for(var i={},r=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,s=e.parameterLimit===1/0?void 0:e.parameterLimit,n=r.split(e.delimiter,s),c=0;c<n.length;++c){var l,d,f=n[c],p=f.indexOf("]="),u=-1===p?f.indexOf("="):p+1;-1===u?(l=e.decoder(f,a.decoder),d=e.strictNullHandling?null:""):(l=e.decoder(f.slice(0,u),a.decoder),d=e.decoder(f.slice(u+1),a.decoder)),o.call(i,l)?i[l]=[].concat(i[l]).concat(d):i[l]=d}return i},n=function(t,e,i){for(var r=e,o=t.length-1;o>=0;--o){var a,s=t[o];if("[]"===s)a=[],a=a.concat(r);else{a=i.plainObjects?Object.create(null):{};var n="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,c=parseInt(n,10);!isNaN(c)&&s!==n&&String(c)===n&&c>=0&&i.parseArrays&&c<=i.arrayLimit?(a=[],a[c]=r):a[n]=r}r=a}return r},c=function(t,e,i){if(t){var r=i.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,a=/(\[[^[\]]*])/,s=/(\[[^[\]]*])/g,c=a.exec(r),l=c?r.slice(0,c.index):r,d=[];if(l){if(!i.plainObjects&&o.call(Object.prototype,l)&&!i.allowPrototypes)return;d.push(l)}var f=0;while(null!==(c=s.exec(r))&&f<i.depth){if(f+=1,!i.plainObjects&&o.call(Object.prototype,c[1].slice(1,-1))&&!i.allowPrototypes)return;d.push(c[1])}return c&&d.push("["+r.slice(c.index)+"]"),n(d,e,i)}};t.exports=function(t,e){var i=e?r.assign({},e):{};if(null!==i.decoder&&void 0!==i.decoder&&"function"!==typeof i.decoder)throw new TypeError("Decoder has to be a function.");if(i.ignoreQueryPrefix=!0===i.ignoreQueryPrefix,i.delimiter="string"===typeof i.delimiter||r.isRegExp(i.delimiter)?i.delimiter:a.delimiter,i.depth="number"===typeof i.depth?i.depth:a.depth,i.arrayLimit="number"===typeof i.arrayLimit?i.arrayLimit:a.arrayLimit,i.parseArrays=!1!==i.parseArrays,i.decoder="function"===typeof i.decoder?i.decoder:a.decoder,i.allowDots="boolean"===typeof i.allowDots?i.allowDots:a.allowDots,i.plainObjects="boolean"===typeof i.plainObjects?i.plainObjects:a.plainObjects,i.allowPrototypes="boolean"===typeof i.allowPrototypes?i.allowPrototypes:a.allowPrototypes,i.parameterLimit="number"===typeof i.parameterLimit?i.parameterLimit:a.parameterLimit,i.strictNullHandling="boolean"===typeof i.strictNullHandling?i.strictNullHandling:a.strictNullHandling,""===t||null===t||"undefined"===typeof t)return i.plainObjects?Object.create(null):{};for(var o="string"===typeof t?s(t,i):t,n=i.plainObjects?Object.create(null):{},l=Object.keys(o),d=0;d<l.length;++d){var f=l[d],p=c(f,o[f],i);n=r.merge(n,p,i)}return r.compact(n)}},b313:function(t,e,i){"use strict";var r=String.prototype.replace,o=/%20/g;t.exports={default:"RFC3986",formatters:{RFC1738:function(t){return r.call(t,o,"+")},RFC3986:function(t){return t}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},d233:function(t,e,i){"use strict";var r=Object.prototype.hasOwnProperty,o=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),a=function(t){var e;while(t.length){var i=t.pop();if(e=i.obj[i.prop],Array.isArray(e)){for(var r=[],o=0;o<e.length;++o)"undefined"!==typeof e[o]&&r.push(e[o]);i.obj[i.prop]=r}}return e},s=function(t,e){for(var i=e&&e.plainObjects?Object.create(null):{},r=0;r<t.length;++r)"undefined"!==typeof t[r]&&(i[r]=t[r]);return i},n=function t(e,i,o){if(!i)return e;if("object"!==typeof i){if(Array.isArray(e))e.push(i);else{if("object"!==typeof e)return[e,i];(o.plainObjects||o.allowPrototypes||!r.call(Object.prototype,i))&&(e[i]=!0)}return e}if("object"!==typeof e)return[e].concat(i);var a=e;return Array.isArray(e)&&!Array.isArray(i)&&(a=s(e,o)),Array.isArray(e)&&Array.isArray(i)?(i.forEach(function(i,a){r.call(e,a)?e[a]&&"object"===typeof e[a]?e[a]=t(e[a],i,o):e.push(i):e[a]=i}),e):Object.keys(i).reduce(function(e,a){var s=i[a];return r.call(e,a)?e[a]=t(e[a],s,o):e[a]=s,e},a)},c=function(t,e){return Object.keys(e).reduce(function(t,i){return t[i]=e[i],t},t)},l=function(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}},d=function(t){if(0===t.length)return t;for(var e="string"===typeof t?t:String(t),i="",r=0;r<e.length;++r){var a=e.charCodeAt(r);45===a||46===a||95===a||126===a||a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122?i+=e.charAt(r):a<128?i+=o[a]:a<2048?i+=o[192|a>>6]+o[128|63&a]:a<55296||a>=57344?i+=o[224|a>>12]+o[128|a>>6&63]+o[128|63&a]:(r+=1,a=65536+((1023&a)<<10|1023&e.charCodeAt(r)),i+=o[240|a>>18]+o[128|a>>12&63]+o[128|a>>6&63]+o[128|63&a])}return i},f=function(t){for(var e=[{obj:{o:t},prop:"o"}],i=[],r=0;r<e.length;++r)for(var o=e[r],s=o.obj[o.prop],n=Object.keys(s),c=0;c<n.length;++c){var l=n[c],d=s[l];"object"===typeof d&&null!==d&&-1===i.indexOf(d)&&(e.push({obj:s,prop:l}),i.push(d))}return a(e)},p=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},u=function(t){return null!==t&&"undefined"!==typeof t&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))};t.exports={arrayToObject:s,assign:c,compact:f,decode:l,encode:d,isBuffer:u,isRegExp:p,merge:n}}}]);