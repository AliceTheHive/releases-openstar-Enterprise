(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0cf355"],{6379:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-dialog",{attrs:{title:t.title,visible:t.isVisible,width:"40%","close-on-click-modal":!1},on:{"update:visible":function(e){t.isVisible=e}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:"添加"===t.title||"编辑"===t.title,expression:"title ==='添加' || title ==='编辑'  "}],staticClass:"modal-body col-sm-12"},[n("el-form",{ref:"form",attrs:{"label-width":"90px","label-position":"left"}},[n("el-form-item",{attrs:{label:"文件名称"}},[n("el-input",{model:{value:t.file_name,callback:function(e){t.file_name=e},expression:"file_name"}})],1),n("el-form-item",{attrs:{label:"函数名称"}},[n("el-input",{model:{value:t.func_name,callback:function(e){t.func_name=e},expression:"func_name"}})],1),n("el-form-item",{attrs:{label:"描述"}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.desc,expression:"desc"}],staticStyle:{width:"100%"},attrs:{rows:"3"},domProps:{value:t.desc},on:{input:function(e){e.target.composing||(t.desc=e.target.value)}}})]),n("el-form-item",{attrs:{label:"函数内容"}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.contents,expression:"contents"}],staticStyle:{width:"100%"},attrs:{rows:"10"},domProps:{value:t.contents},on:{input:function(e){e.target.composing||(t.contents=e.target.value)}}})])],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.isVisible=!1}}},[t._v("取 消")]),n("el-button",{directives:[{name:"show",rawName:"v-show",value:"添加"===t.title,expression:"title === '添加' "}],attrs:{type:"primary"},on:{click:t.setData}},[t._v("添加")]),n("el-button",{directives:[{name:"show",rawName:"v-show",value:"编辑"===t.title,expression:"title === '编辑' "}],attrs:{type:"primary"},on:{click:t.setData}},[t._v("编辑")])],1)]),n("el-card",{attrs:{shadow:"never"}},[n("el-row",{staticStyle:{"margin-bottom":"20px","margin-left":"10px"},attrs:{gutter:10}},[n("div",{staticStyle:{width:"300px",float:"left"}},[n("el-input",{attrs:{"prefix-icon":"el-icon-search",placeholder:"请输入搜索内容"},model:{value:t.ruleSearch,callback:function(e){t.ruleSearch=e},expression:"ruleSearch"}})],1),n("div",{staticStyle:{float:"right"}},[n("el-button",{attrs:{type:"primary",size:"mini",round:""},on:{click:t.showDiag}},[t._v("添加插件")])],1)]),n("wafDivider"),n("el-table",{ref:"multipleTable",staticStyle:{"margin-top":"20px",width:"100%"},attrs:{"tooltip-effect":"dark",data:t.results}},[n("el-table-column",{attrs:{label:"ID",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t"+t._s(e.$index+1)+"\n\t\t\t\t")]}}])}),n("el-table-column",{attrs:{label:"函数名称",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t"+t._s(e.row.func_name)+"\n\t\t\t\t")]}}])}),n("el-table-column",{attrs:{label:"文件名称",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t"+t._s(e.row.file)+"\n\t\t\t\t")]}}])}),n("el-table-column",{attrs:{label:"函数内容","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t"+t._s(e.row.contents)+" \n\t\t\t\t")]}}])}),n("el-table-column",{attrs:{label:"描述",width:"300","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t"+t._s(e.row.description)+" \n\t\t\t\t")]}}])}),n("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"danger",plain:"",size:"mini"},on:{click:function(n){t.delData(e.row.func_name)}}},[n("i",{staticClass:"fa fa-close"}),t._v(" 删除")]),n("el-button",{attrs:{type:"success",plain:"",size:"mini"},on:{click:function(n){t.editDiag(e.row,e.$index)}}},[n("i",{staticClass:"fa fa-edit"}),t._v(" 编辑")])]}}])})],1),n("Pagination",{staticStyle:{"margin-top":"20px","margin-bottom":"20px"},attrs:{pageSizes:t.pageSizes,pageSize:t.pageSize,pageTotal:t.pageTotal,currentPage:t.currentPage},on:{handleSizeChange:t.handleSizeChange,handleCurrentChange:t.handleCurrentChange}})],1)],1)},a=[],o=function(){return n.e("chunk-24bbae2e").then(n.bind(null,"0882"))},s=function(){return n.e("chunk-2d0cf63b").then(n.bind(null,"6407"))},l={data:function(){return{ruleSearch:"",temp:[],results:[],pageTable:[],pageSizes:[5,10,20],pageSize:10,currentPage:1,pageTotal:0,isVisible:!1,title:"",id:0,func_name:"",file_name:"",contents:"",desc:""}},mounted:function(){this.initData()},methods:{initData:function(){var t=this,e=t.secReq(t.api.plugins+"/get","get",{id:"all_Mod"});if(e.hasOwnProperty("code")&&"ok"===e.code){var n=new Array,i=e.msg;for(var a in i)if("count"!=a){var o={};o=i[a],o["func_name"]=a,o["contents"]=t.b64Decode(i[a]["contents"]),n.push(o)}t.temp=n,t.pageTable=n,t.pageTotal=n.length,t.handleCurrentChange(1)}else t.$notify({type:"warning",title:"提示",message:e.msg,duration:1500,position:"bottom-right"})},showDiag:function(){var t=this;t.func_name="",t.file_name="",t.contents="",t.desc="",t.title="添加",t.isVisible=!0},editDiag:function(t,e){var n=this;n.id=e,n.func_name=t.func_name,n.file_name=t.file,n.contents=t.contents,n.desc=t.description,n.title="编辑",n.isVisible=!0},delData:function(t){var e=this,n=e.secReq(e.api.plugins_cluster+"/del","get",{id:t});n.hasOwnProperty("code")&&"ok"===n.code?(e.$notify({type:"success",title:"提示",message:"删除成功",duration:1500,position:"bottom-right"}),e.initData()):e.$notify({type:"warning",title:"提示",message:n.msg,duration:1500,position:"bottom-right"})},setData:function(){var t=this,e=t.title;if("添加"===e){var n={file:t.file_name,contents:t.b64Encode(t.contents),description:t.b64Encode(t.desc)},i=t.secReq(t.api.plugins_cluster+"/add","post",{id:t.func_name,value:JSON.stringify(n)});i.hasOwnProperty("code")&&"ok"===i.code?(t.$notify({type:"success",title:"提示",message:"添加成功",duration:1500,position:"bottom-right"}),t.initData()):t.$notify({type:"warning",title:"提示",message:i.msg,duration:1500,position:"bottom-right"})}else{new Object,n={file:t.file_name,contents:t.b64Encode(t.contents),description:t.b64Encode(t.desc)},i=t.secReq(t.api.plugins_cluster+"/set","post",{id:t.func_name,value:JSON.stringify(n)});i.hasOwnProperty("code")&&"ok"===i.code?(t.$notify({type:"success",title:"提示",message:"修改成功",duration:1500,position:"bottom-right"}),t.initData()):t.$notify({type:"warning",title:"提示",message:i.msg,duration:1500,position:"bottom-right"})}console.log(t.title,"ops"),t.isVisible=!1},handleSizeChange:function(t){var e=this;e.currentPage=1,e.pageSize=t,e.results=e.pageTable.slice(0,0+t)},handleCurrentChange:function(t){var e=this;1===e.pageSize?e.results=e.pageTable.slice(0,t*e.pageSize):e.results=e.pageTable.slice(t*e.pageSize-e.pageSize,t*e.pageSize)}},filters:{matchState:function(t){return tt}},components:{wafDivider:o,Pagination:s},watch:{$route:function(t,e){},ruleSearch:{handler:function(t,e){var n=this;n.results=""===t?n.temp:n.temp.filter(function(e){if(e.func_name.indexOf(t)>=0)return!0})}}}},r=l,c=n("2877"),u=Object(c["a"])(r,i,a,!1,null,null,null);e["default"]=u.exports}}]);